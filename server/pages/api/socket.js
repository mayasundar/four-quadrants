"use strict";(()=>{var e={};e.id=924,e.ids=[924],e.modules={5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6287:e=>{e.exports=import("socket.io")},6762:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,o){return o in t?t[o]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,o)):"function"==typeof t&&"default"===o?t:void 0}}})},4385:(e,t,o)=>{o.a(e,async(e,n)=>{try{o.r(t),o.d(t,{config:()=>s,default:()=>l,routeModule:()=>u});var i=o(9947),r=o(2706),a=o(6762),c=o(2208),d=e([c]);c=(d.then?(await d)():d)[0];let l=(0,a.M)(c,"default"),s=(0,a.M)(c,"config"),u=new i.PagesAPIRouteModule({definition:{kind:r.A.PAGES_API,page:"/api/socket",pathname:"/api/socket",bundlePath:"",filename:""},userland:c});n()}catch(e){n(e)}})},2208:(e,t,o)=>{o.a(e,async(e,n)=>{try{let c;o.r(t),o.d(t,{default:()=>a});var i=o(6287),r=e([i]);i=(r.then?(await r)():r)[0];let d={};function a(e,t){t.socket.server.io||((c=new i.Server(t.socket.server,{path:"/api/socket",addTrailingSlash:!1,cors:{origin:"*",methods:["GET","POST"]}})).on("connection",e=>{console.log("User connected:",e.id),d[e.id]={name:"",room:""},e.on("check-name",t=>{d[e.id]?.name||(e.emit("redirect-name",t),console.log("Redirecting to name entry:",e.id))}),e.on("join-room",({room:t,name:o})=>{o&&""!==o.trim()?(d[e.id]={name:o,room:t},e.join(t),console.log(`${o} joined room: ${t}`),e.to(t).emit("player-joined",{name:o})):e.emit("redirect-name",t)}),e.on("get-players",e=>{let t=Object.values(d).filter(t=>t.room===e);c.to(e).emit("update-players",t)}),e.on("add-circle",({roomCode:e,circles:t})=>{c.to(e).emit("add-circle",{circles:t})}),e.on("delete-circle",({roomCode:e,id:t})=>{c.to(e).emit("delete-circle",{id:t})}),e.on("update-circle",({roomCode:e,id:t,newX:o,newY:n})=>{c.to(e).emit("update-circle",{id:t,newX:o,newY:n})}),e.on("update-circle-text",({roomCode:e,id:t,newText:o})=>{c.to(e).emit("update-circle-text",{id:t,newText:o})}),e.on("update-axis-labels",({roomCode:e,top:t,left:o,right:n,bottom:i})=>{c.to(e).emit("update-axis-labels",{top:t,left:o,right:n,bottom:i})}),e.on("disconnect",()=>{delete d[e.id],console.log("User disconnected:",e.id)})}),t.socket.server.io=c),t.end()}n()}catch(e){n(e)}})},2706:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return o}});var o=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},9947:(e,t,o)=>{e.exports=o(5600)}};var t=require("../../webpack-api-runtime.js");t.C(e);var o=t(t.s=4385);module.exports=o})();